

<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
  
  <!-- ====== SEO UTAMA - WAJIB 100% ====== -->
  <title>Dunnak.com - Pesan Makanan & Jajanan Online Kalibening, Banjarnegara | Antar Cepat, Bayar di Tempat (COD)</title>
  <meta name="description" content="Pesan makanan enak di Kalibening & sekitarnya: nasi box, gorengan, minuman dingin, kue basah, camilan. Pengiriman cepat, bayar pas sampai (COD). Buka 24 jam!" />
  <meta name="keywords" content="pesan makanan kalibening, antar makanan kalibening, dunnak, dunnak.com, jajanan kalibening, cod kalibening, nasi box kalibening, gorengan antar, pesan online banjarnegara" />
  <meta name="author" content="Dunnak Indonesia" />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="googlebot" content="index, follow, max-image-preview:large" />
  <link rel="canonical" href="https://dunnak.com/" />

  <!-- Geo Targeting (sangat penting untuk lokal SEO) -->
  <meta name="geo.region" content="ID-JT" />
  <meta name="geo.placename" content="Kalibening, Kabupaten Banjarnegara, Jawa Tengah" />
  <meta name="geo.position" content="-7.4167;109.5833" />
  <meta name="ICBM" content="-7.4167, 109.5833" />

  <!-- Open Graph Facebook / WhatsApp -->
  <meta property="og:title" content="Dunnak.com - Pesan Makanan Online Kalibening | Antar Cepat, COD" />
  <meta property="og:description" content="Makan atau jajan di Kalibening? Langsung pesan di Dunnak! Nasi box, gorengan, minuman, kue, semua ada. Bayar di tempat." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://dunnak.com/" />
  <meta property="og:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6-JhY6g9H4ggtXPHCO7pTjErtprKfSRlgttoFgT4LcX-O2ROw-oxj7Ntr3r7cY6TdN5AMrwDJ7hyfyU1DI4ASMZ_Mw2chnMaXIDiWHZ-8X3H1Lhz-PjI7KIh2716aY_g4FIxL2Fe4OxBsIEAyE52WrLYS-p1La1UsHuVcQvFK-Np9l-ZixakqnZjx44/s1200/20251120_174337.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta propertyËØÑ‰∏∫="og:site_name" content="Dunnak.com" />
  <meta property="og:locale" content="id_ID" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Dunnak.com - Makanan & Jajanan Antar Kalibening" />
  <meta name="twitter:description" content="Pesan makanan favoritmu di Kalibening, bayar pas sampai (COD)" />
  <meta name="twitter:image" content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6-JhY6g9H4ggtXPHCO7pTjErtprKfSRlgttoFgT4LcX-O2ROw-oxj7Ntr3r7cY6TdN5AMrwDJ7hyfyU1DI4ASMZ_Mw2chnMaXIDiWHZ-8X3H1Lhz-PjI7KIh2716aY_g4FIxL2Fe4OxBsIEAyE52WrLYS-p1La1U_mMHuVcQvFK-Np9l-ZixakqnZjx44/s1200/20251120_174337.png" />

  <!-- Tambahan biar Google cepat index & suka banget -->
  <meta name="theme-color" content="#10b981" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="application-name" content="Dunnak" />
  <meta name="apple-mobile-web-app-title" content="Dunnak - Makanan Kalibening" />
  <meta name="format-detection" content="telephone=yes" />

  <!-- Favicon (tambahkan kalau belum punya) -->
  <link rel="icon" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6-JhY6g9H4ggtXPHCO7pTjErtprKfSRlgttoFgT4LcX-O2ROw-oxj7Ntr3r7cY6TdN5AMrwDJ7hyfyU1DI4ASMZ_Mw2chnMaXIDiWHZ-8X3H1Lhz-PjI7KIh2716aY_g4FIxL2Fe4OxBsIEAyE52WrLYS-p1La1U_mMHuVcQvFK-Np9l-ZixakqnZjx44/s3264/20251120_174337.png" type="image/png" />

  <!-- JSON-LD Structured Data (INI YANG BIKIN GOOGLE JATUH CINTA - LocalBusiness + Restaurant) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Restaurant",
    "name": "Dunnak.com - Pesan Antar Makanan Kalibening",
    "url": "https://dunnak.com",
    "logo": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6-JhY6g9H4ggtXPHCO7pTjErtprKfSRlgttoFgT4LcX-O2ROw-oxj7Ntr3r7cY6TdN5AMrwDJ7hyfyU1DI4ASMZ_Mw2chnMaXIDiWHZ-8X3H1Lhz-PjI7KIh2716aY_g4FIxL2Fe4OxBsIEAyE52WrLYS-p1La1U_mMHuVcQvFK-Np9l-ZixakqnZjx44/s3264/20251120_174337.png",
    "image": "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6-JhY6g9H4ggtXPHCO7pTjErtprKfSRlgttoFgT4LcX-O2ROw-oxj7Ntr3r7cY6TdN5AMrwDJ7hyfyU1DI4ASMZ_Mw2chnMaXIDiWHZ-8X3H1Lhz-PjI7KIh2716aY_g4FIxL2Fe4OxBsIEAyE52WrLYS-p1La1U_mMHuVcQvFK-Np9l-ZixakqnZjx44/s3264/20251120_174337.png",
    "description": "Platform pesan antar makanan dan jajanan no.1 di Kalibening & sekitarnya. Pengiriman cepat, bayar di tempat (COD).",
    "priceRange": "Rp10.000 - Rp100.000",
    "servesCuisine": ["Indonesia", "Makanan Ringan", "Minuman", "Gorengan", "Nasi Box"],
    "paymentAccepted": ["Cash"],
    "hasMenu": "https://dunnak.com",
    "openingHours": "Mo-Su 00:00-23:59",
    "telephone": "+62",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "JL. Raya Gununglangit - Kalibening",
      "addressLocality": "Kalibening",
      "addressRegion": "Banjarnegara",
      "postalCode": "53474",
      "addressCountry": "ID"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": -7.4167,
      "longitude": 109.5833
    },
    "areaServed": {
      "@type": "AdministrativeArea",
      "name": "Kecamatan Kalibening dan sekitarnya"
    },
    "sameAs": [
      "https://www.instagram.com/dunnakindonesia",
      "https://www.tiktok.com/@dunnakindonesia"
    ]
  }
  </script>

  <!-- Preconnect untuk kecepatan loading (Google suka situs cepat) -->
  <link rel="preconnect" href="https://dlnenwglsmfyhdysmqdc.supabase.co" />
  <link rel="preconnect" href="https://blogger.googleusercontent.com" />
</head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Dunnak.com - mau makan atau jajan semua ada di dunnak</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body.modal-open, body.sidebar-open {
      overflow: hidden;
    }
    #sidebar-backdrop {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.4);
      z-index: 40;
    }
    #sidebar-backdrop.open {
      display: block;
    }
    #toast {
      position: fixed;
      top: 1rem;
      left: 50%;
      transform: translateX(-50%);
      max-width: 90%;
      z-index: 60;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      font-size: 1rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      transition: opacity 0.3s ease, transform 0.3s ease;
      opacity: 0;
      pointer-events: none;
    }
    #toast.show {
      opacity: 1;
      pointer-events: auto;
    }
    #toast.success {
      background-color: #10b981;
      color: white;
    }
    #toast.error {
      background-color: #ef4444;
      color: white;
    }
    #toast i {
      font-size: 1.25rem;
    }
    #categories {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    #categories::-webkit-scrollbar {
      display: none;
    }
    #categories button {
      scroll-snap-align: start;
      flex: 0 0 auto;
      margin-right: 0.75rem;
    }
    #produk-grid {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x proximity;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
      scrollbar-color: #d1d5db transparent;
      padding-bottom: 1rem;
    }
    #produk-grid::-webkit-scrollbar {
      height: 8px;
    }
    #produk-grid::-webkit-scrollbar-thumb {
      background-color: #d1d5db;
      border-radius: 4px;
    }
    #produk-grid article {
      flex: 0 0 200px;
      margin-right: 1rem;
      scroll-snap-align: start;
    }
    #hero-slider {
      position: relation;
      overflow: hidden;
    }
    .slider-item {
      display: none;
      animation: fadeIn 0.5s ease-in-out;
    }
    .slider-item.active {
      display: block;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .slider-dots {
      position: absolute;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.5rem;
    }
    .slider-dot {
      width: 10px;
      height: 10px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 30%;
      cursor: pointer;
    }
    .slider-dot.active {
      background: white;
    }
    body {
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }
    #search-container {
      position: sticky;
      top: 4.5rem;
      z-index: 30;
      padding: 0.75rem 1;
      background: transparent;
    }
    #search-button {
      cursor: pointer;
    }
    #search-wrapper {
      max-width: 600px;
      width: 100%;
      margin: 0 auto;
    }
    #ads-grid {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x proximity;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
      scrollbar-color: #d1d5db transparent;
      padding-bottom: 1rem;
    }
    #ads-grid::-webkit-scrollbar {
      height: 8px;
    }
    #ads-grid::-webkit-scrollbar-thumb {
      background-color: #d1d5db;
      border-radius: 4px;
    }
    #ads-grid article {
      flex: 0 0 200px;
      margin-right: 1rem;
      scroll-snap-align: start;
      position: relative;
      }
    .faq-item {
      background: white;
      border-radius: 0.5rem;
      overflow: hidden;
      margin-bottom: 1rem;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    .faq-item summary {
      padding: 1rem;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.3s ease;
    }
    .faq-item summary:hover {
      background: #f9fafb;
    }
    .faq-item summary::after {
      content: '\f078';
      font-family: 'Font Awesome 6 Free';
      font-weight: 900;
      font-size: 0.875rem;
      color: #6b7280;
    }
    .faq-item[open] summary::after {
      content: '\f077';
    }
    .faq-item .faq-content {
      padding: 1rem;
      background: #f9fafb;
      font-size: 0.875rem;
      color: #4b5563;
    }
    .ad-label {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      background: rgba(30, 64, 175, 0.50);
      color: white;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.75rem;
      font-weight: 500;
    }
    @media (min-width: 640px) {
      #ads-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
      }
      #ads-grid article {
        flex: none;
        margin-right: 0;
      }
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
<script>
// === BUKA/TUTUP SILENT + HALAMAN TUTUP WARNA CERAH SESUAI TEMA DUNNAK ===
let JAM_BUKA = 15;   // Ubah angka ini saja (15 = 15:00 WIB)
let JAM_TUTUP = 22;  // Ubah angka ini saja (21 = 21:00 WIB)

document.addEventListener("DOMContentLoaded", () => {
  const getWIB = () => new Date(new Date().getTime() + new Date().getTimezoneOffset() * 60000 + 3600000*7);

  const now = getWIB();
  const h = now.getHours();

  if (h >= JAM_TUTUP || h < JAM_BUKA) {
    let next = new Date(now);
    next.setHours(JAM_BUKA, 0, 0, 0);
    if (h >= JAM_TUTUP) next.setDate(next.getDate() + 1);

    const update = () => {
      const diff = next - getWIB();
      if (diff <= 0) location.reload();
      const hh = String(Math.floor(diff / 3600000)).padStart(2,'0');
      const mm = String(Math.floor((diff % 3600000) / 60000)).padStart(2,'0');
      const ss = String(Math.floor((diff % 60000) / 1000)).padStart(2,'0');
      document.getElementById("timer").textContent = `${hh}:${mm}:${ss}`;
    };

    document.body.innerHTML = `
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

      <div style="min-height:100dvh;background:linear-gradient(135deg,#ecfdf5,#d1fae5);color:#065f46;display:grid;place-items:center;padding:1.5rem;font-family:system-ui,-apple-system,sans-serif;">
        <div style="width:100%;max-width:420px;background:white;border-radius:24px;padding:3rem 2rem;box-shadow:0 20px 40px rgba(16,185,129,0.15);text-align:center;overflow:hidden;position:relative;">

          <!-- Background accent halus -->
          <div style="position:absolute;top:0;left:0;right:0;height:8px;background:linear-gradient(90deg,#10b981,#34d399,#6ee7b7);"></div>

          <!-- Logo -->
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6-JhY6g9H4ggtXPHCO7pTjErtprKfSRlgttoFgT4LcX-O2ROw-oxj7Ntr3r7cY6TdN5AMrwDJ7hyfyU1DI4ASMZ_Mw2chnMaXIDiWHZ-8X3H1Lhz-PjI7KIh2716aY_g4FIxL2Fe4OxBsIEAyE52WrLYS-p1La1U_mMHuVcQvFK-Np9l-ZixakqnZjx44/s640/20251120_174337.png" 
               alt="Dunnak.com" 
               style="width:88px;height:88px;border-radius:50%;margin:0 auto 1.5rem;border:4px solid #ecfdf5;box-shadow:0 10px 30px rgba(16,185,129,0.25);object-fit:cover;">

          <h1 style="font-size:2rem;font-weight:800;margin:0 0 0.5rem;color:#065f46;">Sedang Istirahat</h1>
          <p style="font-size:1.05rem;color:#4b5563;margin:0 0 2rem;line-height:1.6;">Kami akan kembali melayani pesanan pada jam operasional berikut</p>

          <!-- Jam Operasional -->
          <div style="background:#ecfdf5;border:2px solid #a7f3d0;border-radius:16px;padding:1.4rem;margin:1.5rem 0;">
            <p style="font-size:0.95rem;color:#059669;margin:0 0 0.5rem;font-weight:600;">Jam Operasional Setiap Hari</p>
            <p style="font-size:2.2rem;font-weight:900;color:#065f46;margin:0;">
              ${JAM_BUKA.toString().padStart(2,'0')}:00 ‚Äì ${JAM_TUTUP.toString().padStart(2,'0')}:00 WIB
            </p>
          </div>

          <!-- Countdown -->
          <p style="font-size:1rem;color:#065f46;margin:1.8rem 0 0.6rem;font-weight:600;">Buka kembali dalam</p>
          <div id="timer" style="font-size:3.4rem;font-weight:900;color:#059669;background:#ecfdf5;padding:0.8rem 1.2rem;border-radius:14px;display:inline-block;min-width:280px;letter-spacing:3px;box-shadow:0 8px 25px rgba(16,185,129,0.2);">
            00:00:00
          </div>

          <!-- Sosial Media (Ikon Asli) -->
          <div style="margin-top:2.8rem;display:flex;gap:1.8rem;justify-content:center;">
            <a href="https://instagram.com/dunnakindonesia" target="_blank" style="color:#E4405F;font-size:2.2rem;transition:transform .25s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="https://tiktok.com/@dunnakindonesia" target="_blank" style="color:#000;font-size:2.2rem;transition:transform .25s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
              <i class="fab fa-tiktok"></i>
            </a>
            <a href="https://www.youtube.com/channel/UCUfAjAXXnZHz8GM7u8JOq8w" target="_blank" style="color:#f00;font-size:2.2rem;transition:transform .25s;" onmouseover="this.style.transform='translateY(-4px)'" onmouseout="this.style.transform='translateY(0)'">
              <i class="fab fa-youtube"></i>
            </a>
          </div>

          <p style="margin-top:2.5rem;font-size:0.85rem;color:#6b7280;">
            ¬© 2025 Dunnak.com ‚Ä¢ Makan & Jajan Kalibening
          </p>
        </div>
      </div>
    `;

    update();
    setInterval(update, 1000);

    // Anti-bypass tetap aktif
    ["contextmenu","selectstart","dragstart"].forEach(e=>document.addEventListener(e,ev=>ev.preventDefault()));
    document.onkeydown = e => {
      if(e.key=="F12"||e.ctrlKey&&(e.shiftKey||e.key.toLowerCase()=="u")) e.preventDefault();
    };

    throw "Tutup otomatis";
  }
  // Saat buka ‚Üí website normal, tanpa banner sama sekali
});
  
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', e => {
      if (
        e.key === 'F12' ||
        (e.ctrlKey && e.shiftKey && ['I', 'C', 'J'].includes(e.key)) ||
        (e.ctrlKey && e.key === 'U')
      ) {
        e.preventDefault();
      }
    });
  </script>
<!-- NAVBAR DUNNAK.COM ‚Äì LEVEL GOFOOD 2025 (100% RESPONSIF) -->
<header class="bg-white/95 backdrop-blur-xl shadow-md sticky top-0 z-50 border-b border-gray-100">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16 lg:h-20">

      <!-- Logo & Brand ‚Äì Kiri -->
      <div class="flex items-center">
        <a href="#" class="flex items-center gap-3 group">
          <!-- Logo dengan efek glow halus -->
          <div class="relative">
            <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6-JhY6g9H4ggtXPHCO7pTjErtprKfSRlgttoFgT4LcX-O2ROw-oxj7Ntr3r7cY6TdN5AMrwDJ7hyfyU1DI4ASMZ_Mw2chnMaXIDiWHZ-8X3H1Lhz-PjI7KIh2716aY_g4FIxL2Fe4OxBsIEAyE52WrLYS-p1La1U_mMHuVcQvFK-Np9l-ZixakqnZjx44/s3264/20251120_174337.png" 
                 alt="Dunnak.com" 
                 class="h-10 lg:h-12 w-auto transition-all duration-300 group-hover:scale-110" 
                 onerror="this.style.display='none'">
            <div class="absolute -inset-2 bg-emerald-500/20 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
          </div>
          <div class="hidden sm:block">
            <h1 class="text-xl lg:text-2xl font-black text-emerald-700 tracking-tight">Dunnak</h1>
            <p class="text-xs lg:text-sm text-emerald-600 font-semibold -mt-1">Kalibening & Sekitarnya</p>
          </div>
        </a>
      </div>

      <!-- Desktop Menu ‚Äì Tengah (hanya muncul di layar besar) -->
      <nav class="hidden lg:flex items-center gap-8">
        <a href="#" class="text-gray-700 font-medium hover:text-emerald-600 hover:font-bold transition">Beranda</a>
        <a href="#produk-grid" class="text-gray-700 font-medium hover:text-emerald-600 hover:font-bold transition">Menu</a>
        <a href="#faq" class="text-gray-700 font-medium hover:text-emerald-600 hover:font-bold transition">FAQ</a>
        <a href="#testimoni" class="text-gray-700 font-medium hover:text-emerald-600 hover:font-bold transition">Testimoni</a>
      </nav>

      <!-- Right Side ‚Äì Tombol Suggeng Rawuh + Mobile Menu -->
      <div class="flex items-center gap-3 lg:gap-4">
        <!-- Tombol Suggeng Rawuh (Desktop & Mobile) -->
        <button id="btn-wishlist" class="hidden sm:flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white font-bold px-5 py-3 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
          </svg>
          Suggeng Rawuh
        </button>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="lg:hidden p-3 rounded-xl hover:bg-gray-100 transition">
          <svg class="h-7 w-7 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</header>

<!-- Mobile Menu Overlay (jika kamu sudah punya sidebar, abaikan ini) -->
<div id="mobile-menu-overlay" class="fixed inset-0 bg-black/50 z-40 hidden" onclick="closeMobileMenu()"></div>
<!-- ACCESSIBILITY TOOLS ‚Äì KHUSUS DIFABEL & LANSIA -->
<div id="accessibility-tools" class="fixed left-4 bottom-4 z-[50] transition-all duration-500">
  <button id="accessibility-toggle" 
          class="bg-emerald-600 hover:bg-emerald-700 text-white w-14 h-14 rounded-full shadow-2xl flex items-center justify-center transform hover:scale-110 transition-all duration-300">
    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
  </button>

  <!-- Panel Tools -->
  <div id="accessibility-panel" class="absolute bottom-20 left-0 bg-white rounded-2xl shadow-2xl p-4 w-64 transform scale-0 origin-bottom-left transition-transform duration-300">
    <h3 class="font-bold text-emerald-700 text-lg mb-3">Pengaturan Kenyamanan</h3>
    
    <div class="space-y-3">
      <!-- Ukuran Teks -->
      <div class="flex items-center justify-between">
        <span class="text-sm font-medium text-gray-700">Ukuran Teks</span>
        <div class="flex gap-2">
          <button data-size="small" class="text-btn active">A</button>
          <button data-size="medium" class="text-btn">A</button>
          <button data-size="large" class="text-btn">A</button>
        </div>
      </div>

      <!-- Kontras Tinggi -->
      <div class="flex items-center justify-between">
        <span class="text-sm font-medium text-gray-700">Kontras Tinggi</span>
        <button id="high-contrast" class="w-12 h-7 rounded-full bg-gray-300 relative transition">
          <span class="absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition"></span>
        </button>
      </div>

      <!-- Mode Baca (Readable Font) -->
      <div class="flex items-center justify-between">
        <span class="text-sm font-medium text-gray-700">Mode Baca</span>
        <button id="readable-mode" class="w-12 h-7 rounded-full bg-gray-300 relative transition">
          <span class="absolute left-1 top-1 w-5 h-5 bg-white rounded-full transition"></span>
        </button>
      </div>

      <!-- Reset -->
      <button id="accessibility-reset" class="w-full mt-4 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 rounded-lg transition">
        Reset Semua
      </button>
    </div>
  </div>
</div>

<script>
// === ACCESSIBILITY TOOLS ‚Äì SUPER CANGGIH & NYAMAN UNTUK SEMUA PENGUNJUNG ===
const toggleBtn = document.getElementById("accessibility-toggle");
const panel = document.getElementById("accessibility-panel");

// Buka/Tutup panel
toggleBtn.addEventListener("click", () => {
  panel.classList.toggle("scale-0");
  panel.classList.toggle("scale-100");
});

// Ukuran Teks
document.querySelectorAll("[data-size]").forEach(btn => {
  btn.addEventListener("click", () => {
    const size = btn.dataset.size;
    document.body.classList.remove("text-small", "text-medium", "text-large");
    document.body.classList.add(`text-${size}`);
    
    document.querySelectorAll("[data-size]").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    
    localStorage.setItem("dunnak_text_size", size);
  });
});

// Kontras Tinggi
document.getElementById("high-contrast").addEventListener("click", () => {
  document.body.classList.toggle("high-contrast");
  const isOn = document.body.classList.contains("high-contrast");
  const toggle = document.querySelector("#high-contrast span");
  toggle.style.left = isOn ? "calc(100% - 28px)" : "4px";
  toggle.parentElement.style.background = isOn ? "#10b981" : "#d1d5db";
  localStorage.setItem("dunnak_high_contrast", isOn);
});

// Mode Baca (font lebih mudah dibaca)
document.getElementById("readable-mode").addEventListener("click", () => {
  document.body.classList.toggle("readable-mode");
  const isOn = document.body.classList.contains("readable-mode");
  const toggle = document.querySelector("#readable-mode span");
  toggle.style.left = isOn ? "calc(100% - 28px)" : "4px";
  toggle.parentElement.style.background = isOn ? "#10b981" : "#d1d5db";
  localStorage.setItem("dunnak_readable", isOn);
});

// Reset
document.getElementById("accessibility-reset").addEventListener("click", () => {
  document.body.classList.remove("text-small", "text-medium", "text-large", "high-contrast", "readable-mode");
  localStorage.removeItem("dunnak_text_size");
  localStorage.removeItem("dunnak_high_contrast");
  localStorage.removeItem("dunnak_readable");
  
  // Reset toggle
  document.querySelectorAll("#high-contrast span, #readable-mode span").forEach(s => {
    s.style.left = "4px";
    s.parentElement.style.background = "#d1d5db";
  });
  document.querySelectorAll("[data-size]").forEach(b => b.classList.remove("active"));
  document.querySelector("[data-size='medium']").classList.add("active");
});

// Load pengaturan sebelumnya
window.addEventListener("load", () => {
  const size = localStorage.getItem("dunnak_text_size") || "medium";
  document.body.classList.add(`text-${size}`);
  document.querySelector(`[data-size='${size}']`).classList.add("active");

  if (localStorage.getItem("dunnak_high_contrast") === "true") document.getElementById("high-contrast").click();
  if (localStorage.getItem("dunnak_readable") === "true") document.getElementById("readable-mode").click();
});
</script>

<style>
  .text-small { font-size: 0.875rem !important; }
  .text-medium { font-size: 1rem !important; }
  .text-large { font-size: 1.125rem !important; line-height: 1.7 !important; }

  .high-contrast {
    background: #000 !important;
    color: #fff !important;
  }
  .high-contrast * { color: #fff !important; background: #000 !important; border-color: #fff !important; }
  .high-contrast .bg-white { background: #000 !important; }
  .high-contrast .text-gray-600 { color: #ccc !important; }

  .readable-mode {
    font-family: 'Comic Sans MS', 'Arial Rounded MT Bold', sans-serif !important;
    line-height: 1.8 !important;
    letter-spacing: 0.5px !important;
  }

  .text-btn {
    @apply w-10 h-10 rounded-lg border-2 border-emerald-600 text-emerald-600 font-bold flex items-center justify-center transition;
  }
  .text-btn.active {
    @apply bg-emerald-600 text-white border-emerald-600;
  }
  .text-btn:nth-child(1) { font-size: 0.875rem; }
  .text-btn:nth-child(2) { font-size: 1rem; }
  .text-btn:nth-child(3) { font-size: 1.25rem; }
</style>
<!-- SEARCH BAR + ANIMASI LOADING SUARA KEREN -->
<div id="search-container" class="max-w-5xl mx-auto px-4 py-8">
  <div class="relative group">
    <!-- Glow Effect Saat Fokus -->
    <div class="absolute -inset-1 bg-gradient-to-r from-emerald-400 to-teal-500 rounded-3xl blur-xl opacity-0 group-focus-within:opacity-50 transition duration-500 pointer-events-none"></div>
    
    <!-- Search Box -->
    <div class="relative bg-white rounded-3xl shadow-lg border border-gray-200 overflow-hidden transition-all duration-300 group-focus-within:border-emerald-500 group-focus-within:shadow-2xl">
      <div class="flex items-center">
        <!-- Ikon Kaca Pembesar -->
        <div class="pl-5 pr-3">
          <svg id="search-button" class="w-6 h-6 text-emerald-600 transition-transform duration-300 group-focus-within:scale-110" 
               fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" 
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
        </div>

        <!-- Input Field -->
        <input id="search" type="search" placeholder="Cari makanan favoritmu..." autocomplete="off"
               class="w-full py-4 pr-4 pl-2 text-base md:text-lg font-medium text-gray-800 placeholder-gray-400 focus:outline-none bg-transparent">

        <!-- Tombol Mikrofon + Animasi Gelombang Suara -->
        <button id="voice-search-btn" class="relative mr-5 flex items-center justify-center">
          <!-- Mikrofon Icon -->
          <svg id="mic-icon" class="w-7 h-7 text-gray-500 transition-all duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" 
                  d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
          </svg>

          <!-- Animasi Gelombang Suara (hanya muncul saat aktif) -->
          <div id="voice-wave" class="absolute inset-0 flex items-center justify-center opacity-0 pointer-events-none">
            <div class="flex gap-1">
              <span class="voice-bar bg-emerald-600"></span>
              <span class="voice-bar bg-emerald-600 animation-delay-100"></span>
              <span class="voice-bar bg-emerald-600 animation-delay-200"></span>
              <span class="voice-bar bg-emerald-600 animation-delay-300"></span>
              <span class="voice-bar bg-emerald-600 animation-delay-400"></span>
            </div>
          </div>
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// === VOICE SEARCH + ANIMASI GELOMBANG SUARA KEREN ===
const voiceBtn = document.getElementById("voice-search-btn");
const micIcon = document.getElementById("mic-icon");
const voiceWave = document.getElementById("voice-wave");
let recognition = null;
let isListening = false;

if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  recognition = new SpeechRecognition();
  recognition.lang = "id-ID";
  recognition.continuous = false;
  recognition.interimResults = false;

  voiceBtn.addEventListener("click", () => {
    if (isListening) {
      recognition.stop();
      return;
    }

    recognition.start();
    isListening = true;

    // Aktifkan animasi gelombang suara
    micIcon.classList.add("opacity-0");
    voiceWave.classList.remove("opacity-0");
    voiceWave.classList.add("opacity-100");

    showToast("üé§ Sedang mendengarkan... bicara sekarang!", "success");
  });

  recognition.onresult = (event) => {
    const result = event.results[0][0].transcript;
    document.getElementById("search").value = result;
    document.getElementById("search").focus();
    performSearch();
    showToast(`‚úÖ Terdeteksi: "${result}"`, "success");
  };

  recognition.onend = () => {
    isListening = false;
    micIcon.classList.remove("opacity-0");
    voiceWave.classList.remove("opacity-100");
    voiceWave.classList.add("opacity-0");
  };

  recognition.onerror = () => {
    isListening = false;
    micIcon.classList.remove("opacity-0");
    voiceWave.classList.remove("opacity-100");
    voiceWave.classList.add("opacity-0");
    showToast("‚ùå Gagal mendengar suara. Coba lagi.", "error");
  };
} else {
  voiceBtn.style.display = "none";
}
</script>

<style>
  /* Animasi Gelombang Suara ‚Äì Super Keren */
  .voice-bar {
    width: 4px;
    height: 4px;
    border-radius: 2px;
    animation: voiceWave 1.5s ease-in-out infinite;
  }

  @keyframes voiceWave {
    0%, 100% { height: 4px; transform: translateY(0); }
    50% { height: 24px; transform: translateY(-10px); }
  }

  .animation-delay-100 { animation-delay: 0.1s; }
  .animation-delay-200 { animation-delay: 0.2s; }
  .animation-delay-300 { animation-delay: 0.3s; }
  .animation-delay-400 { animation-delay: 0.4s; }

  /* Responsif di HP kecil */
  @media (max-width: 480px) {
    #voice-search-btn svg { width: 1.6rem !important; height: 1.6rem !important; }
    .voice-bar { width: 3px; }
    @keyframes voiceWave {
      0%, 100% { height: 3px; }
      50% { height: 20px; transform: translateY(-8px); }
    }
  }
</style>
  <!-- MOBILE SIDEBAR -->
  <div id="sidebar-backdrop"></div>
  <div id="mobile-sidebar" class="fixed inset-y-0 right-0 z-50 w-64 bg-white shadow-lg translate-x-full transition duration-300 ease-in-out md:hidden">
    <div class="flex justify-end p-4">
      <button id="close-sidebar" class="p-2">
        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none">
          <path d="M6 18L18 6M6 6l12 12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    <nav class="flex flex-col p-4 space-y-4">
      <a href="#" class="text-sm font-medium hover:text-emerald-600">Beranda</a>
      <a href="#" class="text-sm font-medium hover:text-emerald-600">Menu</a>
      <a href="#" class="text-sm font-medium hover:text-emerald-600">Wishlist</a>
      <a href="#" class="text-sm font-medium hover:text-emerald-600">Kontak</a>
    </nav>
  </div>
<!-- HERO SLIDER FINAL ‚Äì PERGANTIAN HALUS, TANPA BAYANGAN, SUPER BERSIH -->
<section class="w-full px-4 py-6">
  <div class="relative max-w-full mx-auto overflow-hidden rounded-3xl">
    <div id="hero-slider" class="relative w-full">

      <!-- Slide 1 -->
      <div class="slider-item active">
        <div class="relative w-full pt-[56.25%] sm:pt-[50%] md:pt-[45%] lg:pt-[40%] xl:pt-[35%] overflow-hidden">
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjQBQCELtF3l2cvUL_5GMk-bjvDRB0_naRR53fqY9lLgrjVSOf1uh1cVQspa5fd0fLnLGpYUN_23IUMLjeuCAZjnYjB78BM8lhDe05t2aTMXcU9Fl3P7VNTJh2TmwbuCczQVMfQCxVBEEdadjCIzZ546blJRtHkahyphenhyphenoj7wBKPHTsf3XQx7JM3Qp9zxMlbAE/s1920/20251120_194346.png" 
               alt="Dunnak.com"
               class="absolute inset-0 w-full h-full object-cover object-center"
               loading="lazy">
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="slider-item">
        <div class="relative w-full pt-[56.25%] sm:pt-[50%] md:pt-[45%] lg:pt-[40%] xl:pt-[35%] overflow-hidden">
          <img src="https://images.unsplash.com/photo-1513106580091-1d82408b8f6a?w=1920&q=80&auto=format&fit=crop" 
               alt="Dunnak.com"
               class="absolute inset-0 w-full h-full object-cover object-center"
               loading="lazy">
        </div>
      </div>

      <!-- Slide 3 -->
      <div class="slider-item">
        <div class="relative w-full pt-[56.25%] sm:pt-[50%] md:pt-[45%] lg:pt-[40%] xl:pt-[35%] overflow-hidden">
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgsk84Gkrgw4y_4bAZkHguOEg3fXoc9kfaV-vkMPY_VOLZgeJBjhtveCFPAVS4dDyjpQ-nC6akVgcxUtnTglMVJpyDfQmF035rS4HvbI3dQIOViG1l6DV5nM3T1Acl8C4aY6KwlF5UPv0kRQU7qe3fc4FX4c04znYL2MPdDQkMYSC1eGFXJcHCQFkmNudVE/s1920/20251120_204805.png" 
               alt="Dunnak.com"
               class="absolute inset-0 w-full h-full object-cover object-center"
               loading="lazy">
        </div>
      </div>

      <!-- Slide 4 -->
      <div class="slider-item">
        <div class="relative w-full pt-[56.25%] sm:pt-[50%] md:pt-[45%] lg:pt-[40%] xl:pt-[35%] overflow-hidden">
          <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi6-JhY6g9H4ggtXPHCO7pTjErtprKfSRlgttoFgT4LcX-O2ROw-oxj7Ntr3r7cY6TdN5AMrwDJ7hyfyU1DI4ASMZ_Mw2chnMaXIDiWHZ-8X3H1Lhz-PjI7KIh2716aY_g4FIxL2Fe4OxBsIEAyE52WrLYS-p1La1U_mMHuVcQvFK-Np9l-ZixakqnZjx44/s1920/20251120_174337.png" 
               alt="Dunnak.com"
               class="absolute inset-0 w-full h-full object-cover object-center"
               loading="lazy">
        </div>
      </div>

      <!-- DOTS MINIMAL DI TENGAH BAWAH ‚Äì TIDAK MENGGANGGU -->
      <div class="slider-dots absolute inset-x-0 bottom-4 flex justify-center z-10 pointer-events-none">
        <div class="flex gap-3">
          <span class="dot w-1.5 h-1.5 bg-white/70 rounded-full cursor-pointer transition-all duration-300 hover:bg-white"></span>
          <span class="dot w-1.5 h-1.5 bg-white/50 rounded-full cursor-pointer transition-all duration-300 hover:bg-white/80"></span>
          <span class="dot w-1.5 h-1.5 bg-white/50 rounded-full cursor-pointer transition-all duration-300 hover:bg-white/80"></span>
          <span class="dot w-1.5 h-1.5 bg-white/50 rounded-full cursor-pointer transition-all duration-300 hover:bg-white/80"></span>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- POPUP PROMO DUNNAK.COM - MENGGUNAKAN GAMBAR SRC ASLI -->
<div id="dunnak-popup" class="fixed inset-0 z-[9999] hidden grid place-items-center px-4 md:px-8 overflow-y-auto">
  <!-- Backdrop -->
  <div id="popup-overlay" class="absolute inset-0 bg-black/70 backdrop-blur-xl"></div>
  
  <!-- Popup Card -->
  <div class="relative bg-white rounded-3xl shadow-3xl w-full max-w-lg mx-auto my-8 overflow-hidden"
       style="transform-origin:center; max-height:95dvh;">
    
    <!-- Header Emerald -->
    <div class="bg-gradient-to-r from-emerald-500 to-emerald-600 px-6 py-9 md:py-12 text-center text-white">
      <h2 class="text-2xl md:text-4xl font-black tracking-tight leading-tight">üî• PROMO HARI INI!</h2>
      <p class="mt-2 text-sm md:text-lg opacity-95 font-medium">Khusus pelanggan setia Dunnak.com</p>
    </div>

    <!-- Body -->
    <div class="p-5 md:p-10 text-center -mt-8 md:-mt-12">
      <!-- GAMBAR ASLI DENGAN SRC (ganti link ini dengan gambar promo kamu) -->
      <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjQBQCELtF3l2cvUL_5GMk-bjvDRB0_naRR53fqY9lLgrjVSOf1uh1cVQspa5fd0fLnLGpYUN_23IUMLjeuCAZjnYjB78BM8lhDe05t2aTMXcU9Fl3P7VNTJh2TmwbuCczQVMfQCxVBEEdadjCIzZ546blJRtHkahyphenhyphenoj7wBKPHTsf3XQx7JM3Qp9zxMlbAE/s800/promo-dunnak-real.jpg" 
           alt="Promo Dunnak.com - Diskon 20%"
           class="mx-auto w-full max-w-xs md:max-w-sm rounded-3xl shadow-2xl border-[10px] md:border-[14px] border-white object-cover"
           loading="lazy">

      <h3 class="text-2xl md:text-4xl font-black text-emerald-700 mt-8 md:mt-12 leading-tight">Diskon Spesial 20%</h3>
      <p class="text-gray-600 mt-4 text-base md:text-xl leading-relaxed px-4">
        Gunakan kode promo:
      </p>
      <div class="inline-block bg-emerald-100 text-emerald-800 font-black text-2xl md:text-4xl px-8 py-4 md:py-6 rounded-3xl mt-4 shadow-2xl">
        DUNNAK20
      </div>
      <p class="text-sm md:text-base text-gray-500 mt-4">Min. order Rp35.000 ‚Ä¢ Berlaku hari ini saja</p>

      <!-- Tombol CTA -->
      <a href="https://wa.me/628123456789?text=Halo+Dunnak%21+Saya+mau+order+dengan+kode+DUNNAK20+%F0%9F%8E%89" 
         target="_blank"
         class="inline-block mt-8 md:mt-10 bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-lg md:text-2xl px-10 md:px-16 py-5 md:py-7 rounded-full shadow-2xl transform hover:scale-105 transition-all duration-300">
        Klaim Promo via WhatsApp üöÄ
      </a>

      <p class="text-xs md:text-sm text-gray-400 mt-6">Promo otomatis muncul setiap hari selama periode berlangsung</p>
    </div>

    <!-- Close Button -->
    <button id="popup-close" class="absolute top-3 right-3 md:top-5 md:right-5 bg-white/30 hover:bg-white/50 text-white w-12 h-12 md:w-14 md:h-14 rounded-full flex items-center justify-center backdrop-blur-md transition-all shadow-lg">
      <svg class="w-7 h-7 md:w-9 md:h-9" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>
</div>

<!-- SCRIPT POPUP (tetap sama + zoom-proof) -->
<script>
// ================== SETTING SCHEDULE ==================
const TANGGAL_MULAI = "2025-11-21";        // "2025-11-21" atau kosongkan
const TANGGAL_SELESAI = "2025-11-30";      // "2025-11-30" atau kosongkan
const JAM_MULAI = 15;            // null = selalu muncul
const JAM_SELESAI = 21;          // null = selalu muncul

function getWIB() {
  const n = new Date();
  return new Date(n.getTime() + n.getTimezoneOffset()*60000 + 3600000*7);
}

function isWithinSchedule() {
  const now = getWIB();
  const today = now.toISOString().split('T')[0];
  const hour = now.getHours();

  if (TANGGAL_MULAI && today < TANGGAL_MULAI) return false;
  if (TANGGAL_SELESAI && today > TANGGAL_SELESAI) return false;
  if (JAM_MULAI !== null && JAM_SELESAI !== null) {
    if (hour < JAM_MULAI || hour >= JAM_SELESAI) return false;
  }
  return true;
}

setTimeout(() => {
  if (isWithinSchedule()) {
    document.getElementById("dunnak-popup").classList.remove("hidden");
  }
}, 1000);

// Close
document.getElementById("popup-close").onclick = () => document.getElementById("dunnak-popup").classList.add("hidden");
document.getElementById("popup-overlay").onclick = () => document.getElementById("popup-close").click();

// ZOOM-PROOF: Otomatis scale kalau terlalu besar saat zoom
const popupCard = document.querySelector("#dunnak-popup > div.relative");
if (popupCard) {
  const resizeObserver = new ResizeObserver(() => {
    const viewportHeight = window.innerHeight;
    const cardHeight = popupCard.offsetHeight + 100; // margin safety
    if (cardHeight > viewportHeight * 0.95) {
      popupCard.style.transform = `scale(${viewportHeight * 0.9 / cardHeight})`;
    } else {
      popupCard.style.transform = "scale(1)";
    }
  });
  resizeObserver.observe(document.body);
}
</script>  
  <!-- ADS SECTION -->
  <section class="max-w-6xl mx-auto px-4 py-6">
    <h2 class="text-1xl md:text-1xl font-bold mb-4">Penawaran terkini</h2>
    <div id="ads-grid" class="flex gap-4"></div>
  </section>
<!-- KATEGORI & FILTER ‚Äì SCROLL HALUS TANPA PANAH, SUPER RAMAH MONITOR -->
<section class="bg-gradient-to-b from-white to-emerald-50 py-10">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-5 mb-8">
      <div>
        <h2 class="text-2xl sm:text-3xl font-black text-gray-800">
          Jelajahi Kategori Makanan
        </h2>
        <p class="text-gray-600 mt-1 text-sm sm:text-base">
          Geser untuk melihat semua kategori
        </p>
      </div>

      <!-- Filter Harga -->
      <select id="price-filter" 
              class="w-full sm:w-auto px-5 py-3.5 bg-white border-2 border-emerald-200 rounded-2xl text-gray-700 font-medium focus:outline-none focus:ring-4 focus:ring-emerald-500/30 focus:border-emerald-500 transition shadow-md hover:shadow-lg">
        <option value="">Semua Harga</option>
        <option value="0-25000">Rp0 - Rp25.000</option>
        <option value="25001-50000">Rp25.001 - Rp50.000</option>
        <option value="50001-100000">Rp50.001 - Rp100.000</option>
        <option value="100001+">Di atas Rp100.000</option>
      </select>
    </div>

    <!-- Daftar Kategori ‚Äì Scroll Horizontal Halus Tanpa Panah -->
    <div class="relative -mx-4 px-4"> <!-- Memberi ruang agar terlihat rapi di monitor -->
      <div id="categories" 
           class="flex gap-4 py-3 overflow-x-auto scrollbar-hide scroll-smooth snap-x snap-mandatory">
        <!-- Kategori akan diisi oleh JavaScript seperti biasa -->
        <!-- Contoh kategori statis untuk demo (akan diganti script) -->
        <button class="px-6 py-4 bg-white border-2 border-emerald-200 rounded-2xl text-gray-700 font-semibold whitespace-nowrap shadow hover:shadow-lg hover:border-emerald-400 transition snap-center">
          Semua
        </button>
        <!-- Script akan isi sisanya -->
      </div>
    </div>
  </div>
</section>

<style>
  /* Scroll halus + snap + sembunyikan scrollbar */
  #categories {
    scroll-behavior: smooth;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  #categories::-webkit-scrollbar {
    display: none;
  }

  /* Efek hover kategori lebih hidup */
  #categories button:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 25px rgba(16, 185, 129, 0.15);
  }

  /* Di monitor besar, kategori tidak terlalu panjang */
  @media (min-width: 1024px) {
    #categories {
      justify-content: center;
      flex-wrap: wrap;
    }
  }
</style>
  <!-- MAIN GRID -->
  <main class="max-w-6xl mx-auto px-4 py-6">
    <h2 class="text-2xl md:text-2xl font-bold mb-6">Menu Utama</h2>
    <div id="produk-grid" class="flex gap-4"></div>
  </main>
   <!-- FAQ SECTION -->
  <section id="faq" class="max-w-7xl mx-auto px-4 py-8">
    <h2 class="text-1xl md:text-1xl font-bold text-center mb-6">Pertanyaan yang sering diajukan</h2>
    <div class="max-w-3xl mx-auto">
      <details class="faq-item">
        <summary>Bagaimana cara memesan makanan di Dunnak?</summary>
        <div class="faq-content">
          Untuk memesan makanan, cari menu yang diinginkan menggunakan kolom pencarian atau jelajahi kategori. Klik produk untuk melihat detail, pilih jumlah, lalu klik "Pesan Sekarang" untuk mengisi data pengiriman dan menyelesaikan pesanan.
        </div>
      </details>
      <details class="faq-item">
        <summary>Apa saja metode pembayaran yang tersedia?</summary>
        <div class="faq-content">
          Kami mendukung metode pembayaran langsung saat pengiriman (COD).
        </div>
      </details>
      <details class="faq-item">
        <summary>Berapa lama waktu pengiriman?</summary>
        <div class="faq-content">
          Waktu pengiriman bervariasi tergantung lokasi, tetapi kami berupaya mengirimkan pesanan secepat mungkin.
        </div>
      </details>
      <details class="faq-item">
        <summary>Bagaimana jika ada masalah dengan pesanan saya?</summary>
        <div class="faq-content">
          Jika ada masalah, hubungi kami melalui email di halo@dunnak.com atau telepon ke . Tim kami akan membantu menyelesaikan masalah Anda.
        </div>
      </details>
      <details class="faq-item">
        <summary>Jangkauan layanan Dunnak dimana saja?</summary>
        <div class="faq-content">
          Kami sedang memperluas jangkauan layanan kami. Saat ini, dunnak.com beroprasi di kecamatan kalibening dan sekitarnya.
        </div>
      </details>
    </div>
  </section>
  <!-- CTA SECTION -->
  <section class="max-w-6xl mx-auto px-4 py-12 text-center">
    <h2 class="text-2xl md:text-3xl font-bold mb-4">Jajan atau Makan?</h2>
    <p class="text-gray-600 mb-6">Pesan sekarang dan nikmati hidangan favoritmu dengan pengiriman cepat dan aman!</p>
    <button id="cta-button" class="bg-rose-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-emerald-700">Pesan Sekarang</button>
  </section>
<!-- FOOTER PROFESIONAL DUNNAK.COM 2025 -->
<footer class="bg-gray-900 text-gray-300 py-16">
  <div class="max-w-7xl mx-auto px-6">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 lg:gap-12">

      <!-- Kolom 1 ‚Äì Logo & Deskripsi -->
      <div class="lg:col-span-2">
        <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEioCgC6JQ-pd6mvQ1OvlJSOGqd8-45q7P9K0ejBvIt-XEXcayAs6zpFN6c1D2ejDgR72xdGDZL9yt2yLWl7oRDHQ8Gf2L3Q35VNFlimqORpaOgBDiqJMBGfTLHokc0dFwezZ85HLBx7_rGveEOMDI78CG81kg_mpczYMHdYapbijiLVpqPj2Ep_QrPJwx6H/s3264/20250927_164837.png" 
             alt="Dunnak.com Logo" class="h-12 w-auto mb-6" onerror="this.style.display='none'"/>
        <p class="text-gray-400 leading-relaxed mb-6 max-w-lg">
          dunnak.com ‚Äî Penyedia layanan pemesanan makanan & jajanan <span class="font-semibold text-emerald-400">No.1 di Kalibening dan sekitarnya</span>. Antar cepat, bayar di tempat, buka sampai malam.
        </p>

        <!-- Sosial Media dengan Ikon Resmi -->
        <div class="flex gap-5">
          <a href="https://facebook.com/dunnakindonesia" target="_blank" class="text-gray-400 hover:text-white transition">
            <i class="fab fa-facebook-f text-2xl"></i>
          </a>
          <a href="mailto:halo@dunnak.com" class="text-gray-400 hover:text-white transition">
            <i class="fas fa-envelope text-2xl"></i>
          </a>
          <a href="https://youtube.com/channel/UCUfAjAXXnZHz8GM7u8JOq8w" target="_blank" class="text-gray-400 hover:text-white transition">
            <i class="fab fa-youtube text-2xl"></i>
          </a>
          <a href="https://tiktok.com/@dunnakindonesia" target="_blank" class="text-gray-400 hover:text-white transition">
            <i class="fab fa-tiktok text-2xl"></i>
          </a>
          <a href="https://instagram.com/dunnakindonesia" target="_blank" class="text-gray-400 hover:text-white transition">
            <i class="fab fa-instagram text-2xl"></i>
          </a>
        </div>
      </div>

      <!-- Kolom 2 ‚Äì Quick Links -->
      <div>
        <h3 class="text-xl font-bold text-white mb-5">Link Cepat</h3>
        <ul class="space-y-3 text-gray-400">
          <li><a href="https://dunnak.com" class="hover:text-emerald-400 transition">Beranda</a></li>
          <li><a href="#produk-grid" class="hover:text-emerald-400 transition">Menu Makanan</a></li>
          <li><a href="#faq" class="hover:text-emerald-400 transition">FAQ</a></li>
          <li><a href="https://m.dunnak.com" class="hover:text-emerald-400 transition">Login Admin</a></li>
        </ul>
      </div>

      <!-- Kolom 3 ‚Äì Kontak & Call Center -->
      <div>
        <h3 class="text-xl font-bold text-white mb-5">Hubungi Kami</h3>
        <ul class="space-y-4 text-gray-400">
          <li class="flex items-center gap-3">
            <i class="fas fa-phone-alt text-emerald-400"></i>
            <div>
              <p class="font-semibold text-white">Call Center / WhatsApp</p>
              <a href="tel:+6281234567890" class="text-lg hover:text-emerald-400 transition">0812-3456-7890</a>
            </div>
          </li>
          <li class="flex items-center gap-3">
            <i class="fas fa-envelope text-emerald-400"></i>
            <a href="mailto:halo@dunnak.com" class="hover:text-emerald-400 transition">halo@dunnak.com</a>
          </li>
          <li class="flex items-start gap-3">
            <i class="fas fa-map-marker-alt text-emerald-400 mt-1"></i>
            <div>
              <p class="font-semibold text-white">Dunnak Outpost</p>
              <p class="text-sm">Jl. Raya Gununglangit ‚Äì Kalibening<br>Banjarnegara, Jawa Tengah</p>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- Copyright Bar -->
    <div class="mt-12 pt-8 border-t border-gray-800 text-center">
      <p class="text-gray-500 text-sm">
        ¬© 2025 <span class="font-bold text-emerald-400">DERVO DIGITAL NIAGA</span>. All rights reserved.
      </p>
      <p class="text-gray-600 text-xs mt-2">
        Dibuat dengan <span class="text-red-500">‚ô•</span> untuk pecinta kuliner Kalibening
      </p>
    </div>
  </div>
</footer>

<!-- Font Awesome untuk ikon resmi (sudah ada di head, tapi aman ditambahkan lagi) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- PRODUCT MODAL -->
  <div id="modal-produk" class="fixed inset-0 hidden z-50 flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/40" onclick="closeModal()"></div>
    <div class="relative bg-white rounded-xl shadow-xl max-w-md w-full overflow-hidden">
      <img id="modal-gambar" class="w-full h-48 object-cover" src="" alt="gambar produk" />
      <div class="p-4">
        <div class="flex items-start justify-between gap-3">
          <div>
            <h2 id="modal-nama" class="text-lg font-semibold"></h2>
            <p id="modal-merchant" class="text-xs text-gray-500 mt-1"></p>
          </div>
          <div class="text-right">
            <div id="modal-harga" class="text-lg font-bold text-rose-600"></div>
            <div id="modal-kategori" class="text-xs text-gray-400"></div>
          </div>
        </div>
        <p id="modal-deskripsi" class="mt-3 text-sm text-gray-600"></p>
        <div class="mt-3 flex items-center gap-2">
          <label class="text-xs text-gray-600">Quantity</label>
          <div class="flex items-center border border-gray-200 rounded-md">
            <button id="decrease-quantity" class="px-3 py-1 text-gray-600 hover:bg-gray-100">-</button>
            <span id="modal-quantity" class="px-3 py-1 text-sm">1</span>
            <button id="increase-quantity" class="px-3 py-1 text-gray-600 hover:bg-gray-100">+</button>
          </div>
        </div>
        <div class="mt-4 grid grid-cols-2 gap-2">
          <button onclick="openCheckout()" class="col-span-2 bg-rose-500 text-white py-2 rounded-lg hover:bg-rose-500">Pesan Sekarang</button>
          <button onclick="closeModal()" class="col-span-2 border border-gray-200 py-2 rounded-lg hover:bg-gray-100">Tutup</button>
        </div>
      </div>
    </div>
  </div>
<!-- CHECKOUT MODAL FINAL ‚Äì CONTAINER & ELEMENT 100% RESPONSIF + ZOOM-PROOF -->
<div id="modal-checkout" class="fixed inset-0 hidden z-50 flex items-center justify-center px-4 py-6 overflow-y-auto">
  <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeCheckout()"></div>
  
  <!-- Container Card ‚Äì Auto-scale & Zoom-proof -->
  <div id="checkout-card" class="relative bg-white rounded-3xl shadow-2xl w-full max-w-md mx-auto overflow-hidden"
       style="transform-origin:center top; max-height:95dvh;">
    
    <!-- Header Emerald ‚Äì Responsif Font -->
    <div class="bg-gradient-to-r from-emerald-500 to-emerald-600 px-5 py-7 sm:py-8 text-center text-white">
      <h3 class="text-2xl sm:text-3xl font-black leading-tight">Pesanan Saya</h3>
      <p class="mt-2 text-sm sm:text-base opacity-95">Lengkapi data untuk pengiriman cepat</p>
      <button onclick="closeCheckout()" class="absolute top-3 right-3 sm:top-4 sm:right-4 bg-white/20 hover:bg-white/40 text-white w-10 h-10 rounded-full flex items-center justify-center transition">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>

    <!-- Body ‚Äì Padding & Font Auto-adjust -->
    <div class="p-5 sm:p-6 md:p-8">
      <!-- Ongkir Warning -->
      <div class="bg-orange-50 border-2 border-orange-300 rounded-2xl p-4 mb-5 text-center">
        <p class="text-xs sm:text-sm font-bold text-orange-700 flex items-center justify-center gap-2">
          <svg class="w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"/>
          </svg>
          Belum termasuk ongkir! (Dikonfirmasi admin)
        </p>
      </div>

      <div class="space-y-5">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Nama Lengkap</label>
          <input id="input-nama" type="text" required placeholder="Contoh: Hafis Aditya" 
                 class="w-full px-4 py-3.5 text-base border border-gray-300 rounded-2xl focus:ring-4 focus:ring-emerald-500/30 focus:border-emerald-500 transition">
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Alamat Lengkap (RT/RW)</label>
          <input id="input-alamat" type="text" required placeholder="Jl. Raya Kalibening, RT 04 RW 02" 
                 class="w-full px-4 py-3.5 text-base border border-gray-300 rounded-2xl focus:ring-4 focus:ring-emerald-500/30 focus:border-emerald-500 transition">
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">Nomor WhatsApp</label>
          <input id="input-hp" type="tel" required placeholder="0812-3456-7890" 
                 class="w-full px-4 py-3.5 text-base border border-gray-300 rounded-2xl focus:ring-4 focus:ring-emerald-500/30 focus:border-emerald-500 transition">
        </div>

        <div id="checkout-summary" class="bg-gradient-to-br from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-2xl p-5 text-sm">
          <p class="text-gray-600">Ringkasan pesanan akan muncul di sini...</p>
        </div>
      </div>

      <!-- Tombol ‚Äì Vertical di HP kecil -->
      <div class="mt-8 flex flex-col gap-3">
        <button onclick="handleCheckout()" 
                class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold text-lg py-4 rounded-2xl shadow-xl transform hover:scale-105 transition">
          Proses Pesanan üöÄ
        </button>
        <button onclick="closeCheckout()" 
                class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold text-lg py-4 rounded-2xl transition">
          Batal
        </button>
      </div>

      <p class="text-center text-xs text-gray-500 mt-5">
        Admin akan hubungi kamu via WhatsApp
      </p>
    </div>
  </div>
</div>

<script>
// === ZOOM-PROOF AUTO-SCALE UNTUK CONTAINER CHECKOUT CARD ===
const checkoutCard = document.getElementById("checkout-card");

if (checkoutCard) {
  const adjustScale = () => {
    const viewportHeight = window.innerHeight;
    const viewportWidth = window.innerWidth;
    const cardHeight = checkoutCard.offsetHeight;
    const cardWidth = checkoutCard.offsetWidth;

    let scale = 1;

    if (cardHeight > viewportHeight * 0.92 || cardWidth > viewportWidth * 0.92) {
      const scaleH = viewportHeight * 0.88 / cardHeight;
      const scaleW = viewportWidth * 0.88 / cardWidth;
      scale = Math.min(scaleH, scaleW, 1);
    }

    checkoutCard.style.transform = `scale(${scale})`;
  };

  // Jalankan saat load, resize, zoom
  window.addEventListener("load", adjustScale);
  window.addEventListener("resize", adjustScale);
  document.addEventListener("DOMContentLoaded", adjustScale);

  // Observer untuk perubahan konten (ringkasan pesanan)
  const observer = new MutationObserver(adjustScale);
  observer.observe(checkoutCard, { childList: true, subtree: true, characterData: true });
}
</script>
  <!-- SMALL TOAST -->
  <div id="toast" class="fixed hidden"></div>
  <!-- SCRIPT -->
  <script>
    const SUPABASE_URL = "https://dlnenwglsmfyhdysmqdc.supabase.co";
    const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRsbmVud2dsc21meWhkeXNtcWRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxMTM5ODIsImV4cCI6MjA3MTY4OTk4Mn0.oWKClbQFN5RDS_MkFkPFbwel-LBmD8iGJX1KxN3Db0U";
    if (!SUPABASE_URL || !SUPABASE_ANON) {
      showToast("Konfigurasi Supabase tidak lengkap. Hubungi admin.", "error");
      throw new Error("Supabase credential belum diisi. Ganti SUPABASE_URL dan SUPABASE_ANON.");
    }
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON);
    let produkData = [];
    let operatorData = [];
    let adsData = [];
    let kategoriSet = new Set();
    let selectedProduk = null;
    let selectedQuantity = 1;
    const WA_INDEX_KEY = "wa_rotation_index";
    function getWaIndex() {
      const v = parseInt(localStorage.getItem(WA_INDEX_KEY) || "0", 10);
      return isNaN(v) ? 0 : v;
    }
    function bumpWaIndex() {
      const next = getWaIndex() + 1;
      localStorage.setItem(WA_INDEX_KEY, String(next));
      return next;
    }
    function rupiah(num) {
      if (num == null || isNaN(num)) {
        showToast("Harga produk tidak valid.", "error");
        return "Rp0";
      }
      return "Rp" + Number(num).toLocaleString("id-ID");
    }
    function showToast(text, type = "success", duration = 3000) {
      const toast = document.getElementById("toast");
      const icon = type === "success" ? '<i class="fas fa-check-circle"></i>' : '<i class="fas fa-exclamation-circle"></i>';
      toast.innerHTML = `${icon} ${text}`;
      toast.className = `fixed ${type} show`;
      setTimeout(() => {
        toast.classList.remove("show");
        setTimeout(() => {
          toast.className = "fixed hidden";
          toast.innerHTML = "";
        }, 300);
      }, duration);
    }
    // MOBILE SIDEBAR
    const sidebar = document.getElementById("mobile-sidebar");
    const backdrop = document.getElementById("sidebar-backdrop");
    document.getElementById("mobile-menu-btn").addEventListener("click", () => {
      try {
        sidebar.classList.toggle("translate-x-full");
        backdrop.classList.toggle("open");
        document.body.classList.toggle("sidebar-open");
      } catch (e) {
        showToast("Gagal membuka menu. Coba lagi.", "error");
        console.error("Sidebar toggle failed", e);
      }
    });
    document.getElementById("close-sidebar").addEventListener("click", () => {
      try {
        sidebar.classList.add("translate-x-full");
        backdrop.classList.remove("open");
        document.body.classList.remove("sidebar-open");
      } catch (e) {
        showToast("Gagal menutup menu. Coba lagi.", "error");
        console.error("Sidebar close failed", e);
      }
    });
    document.getElementById("sidebar-backdrop").addEventListener("click", () => {
      try {
        sidebar.classList.add("translate-x-full");
        backdrop.classList.remove("open");
        document.body.classList.remove("sidebar-open");
      } catch (e) {
        showToast("Gagal menutup menu. Coba lagi.", "error");
        console.error("Sidebar backdrop close failed", e);
      }
    });
    // QUANTITY CONTROLS
    document.getElementById("increase-quantity").addEventListener("click", () => {
      try {
        if (selectedQuantity >= 100) {
          showToast("Jumlah pesanan maksimal 100.", "error");
          return;
        }
        selectedQuantity++;
        document.getElementById("modal-quantity").innerText = selectedQuantity;
      } catch (e) {
        showToast("Gagal menambah jumlah pesanan.", "error");
        console.error("Increase quantity failed", e);
      }
    });
    document.getElementById("decrease-quantity").addEventListener("click", () => {
      try {
        if (selectedQuantity <= 1) {
          showToast("Jumlah pesanan minimal 1.", "error");
          return;
        }
        selectedQuantity--;
        document.getElementById("modal-quantity").innerText = selectedQuantity;
      } catch (e) {
        showToast("Gagal mengurangi jumlah pesanan.", "error");
        console.error("Decrease quantity failed", e);
      }
    });
    // SLIDER LOGIC
    const sliderItems = document.querySelectorAll('.slider-item');
    const sliderDotsContainer = document.querySelector('.slider-dots');
    let currentSlide = 0;
    function createSliderDots() {
      sliderItems.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.classList.add('slider-dot');
        if (index === 0) dot.classList.add('active');
        dot.addEventListener('click', () => goToSlide(index));
        sliderDotsContainer.appendChild(dot);
      });
    }
    function updateSlider() {
      sliderItems.forEach((item, index) => {
        item.classList.toggle('active', index === currentSlide);
      });
      document.querySelectorAll('.slider-dot').forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
      });
    }
    function goToSlide(index) {
      currentSlide = (index + sliderItems.length) % sliderItems.length;
      updateSlider();
    }
    setInterval(() => goToSlide(currentSlide + 1), 5000);
    createSliderDots();
    // SHUFFLE FUNCTION
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }
    // LOAD DATA
    async function loadData() {
      try {
        const { data: produk, error: err1 } = await supabaseClient
          .from("produk")
          .select("id,nama,deskripsi,harga,gambar,merchant,alamat,kategori")
          .order("id", { ascending: true });
        if (err1) {
          showToast("Gagal memuat data produk. Coba lagi nanti.", "error");
          throw new Error("Error fetch produk: " + err1.message);
        }
        const { data: msgs, error: err2 } = await supabaseClient
          .from("message")
          .select("id,nomor")
          .order("id", { ascending: true });
        if (err2) {
          showToast("Gagal memuat data operator. Coba lagi nanti.", "error");
          throw new Error("Error fetch message: " + err2.message);
        }
        produkData = shuffleArray(produk || []);
        operatorData = (msgs || []).map(m => {
          const nomor = String(m.nomor).replace(/\D/g, "");
          if (!nomor) {
            showToast("Nomor operator tidak valid.", "error");
          }
          return { id: m.id, nomor };
        });
        if (!produkData.length) {
          showToast("Tidak ada produk tersedia.", "error");
        }
        if (!operatorData.length) {
          showToast("Tidak ada operator tersedia. Hubungi admin.", "error");
        }
        kategoriSet = new Set(produkData.map(p => p.kategori || "Umum"));
        renderCategories();
        renderProduk(produkData);
        // Load ads asynchronously
        loadAds();
      } catch (e) {
        showToast("Gagal memuat data. Periksa koneksi Anda.", "error");
        console.error("loadData failed", e);
      }
    }
    async function loadAds() {
      try {
        const { data: ads, error } = await supabaseClient
          .from("dnkwords")
          .select("id,title,description,image,link")
          .order("id", { ascending: true });
        if (error) {
          showToast("Gagal memuat iklan.", "error");
          console.error("Error fetch ads:", error.message);
          return;
        }
        adsData = shuffleArray(ads || []);
        if (!adsData.length) {
          document.getElementById("ads-grid").parentElement.style.display = 'none';
          return;
        }
        renderAds();
      } catch (e) {
        showToast("Gagal memuat iklan.", "error");
        console.error("loadAds failed", e);
      }
    }
    function renderAds() {
      try {
        const grid = document.getElementById("ads-grid");
        if (!grid) {
          showToast("Gagal menampilkan iklan.", "error");
          throw new Error("Ads-grid element not found");
        }
        grid.innerHTML = "";
        if (!adsData.length) {
          grid.innerHTML = `<div class="flex-1 text-center text-gray-500 py-8">Iklan tidak ditemukan</div>`;
          return;
        }
        for (const item of adsData) {
          if (!item || !item.id || !item.title) {
            showToast("Data iklan tidak valid.", "error");
            continue;
          }
          const card = document.createElement("article");
          card.className = "bg-white rounded-xl overflow-hidden shadow hover:shadow-lg transition cursor-pointer";
          const img = document.createElement("img");
          img.src = item.image || "https://via.placeholder.com/200x150?text=No+Image";
          img.alt = item.title || "Iklan";
          img.className = "h-40 w-full object-cover";
          img.onerror = () => { img.src = "https://via.placeholder.com/200x150?text=No+Image"; };
          const label = document.createElement("span");
          label.className = "ad-label";
          label.innerText = "Iklan";
          const body = document.createElement("div");
          body.className = "p-3";
          const title = document.createElement("h3");
          title.className = "text-sm font-semibold";
          title.innerText = item.title || "‚Äî";
          const description = document.createElement("p");
          description.className = "text-xs text-gray-500 mt-1";
          description.innerText = item.description || "";
          const btn = document.createElement("a");
          btn.href = item.link || "#";
          btn.target = "_blank";
          btn.className = "text-xs bg-orange-500 text-white px-3 py-1 rounded-md hover:bg-orange-500";
          btn.innerText = "Detail";
          body.appendChild(label);
          body.appendChild(title);
          body.appendChild(description);
          body.appendChild(btn);
          card.appendChild(img);
          card.appendChild(body);
          grid.appendChild(card);
        }
      } catch (e) {
        showToast("Gagal menampilkan iklan.", "error");
        console.error("renderAds failed", e);
      }
    }
    // RENDER CATEGORIES
    function renderCategories() {
      try {
        const wrap = document.getElementById("categories");
        if (!wrap) {
          showToast("Gagal menampilkan kategori.", "error");
          throw new Error("Categories element not found");
        }
        wrap.innerHTML = "";
        const btnAll = document.createElement("button");
        btnAll.className = "px-4 py-2 bg-white border border-gray-200 rounded-full text-sm whitespace-nowrap hover:bg-emerald-50";
        btnAll.innerText = "Semua";
        btnAll.onclick = () => {
          try {
            document.getElementById("price-filter").value = "";
            renderProduk(produkData);
          } catch (e) {
            showToast("Gagal menampilkan semua produk.", "error");
            console.error("Render all products failed", e);
          }
        };
        wrap.appendChild(btnAll);
        Array.from(kategoriSet).forEach(k => {
          const btn = document.createElement("button");
          btn.className = "px-4 py-2 bg-white border border-gray-200 rounded-full text-sm whitespace-nowrap hover:bg-emerald-50";
          btn.innerText = k;
          btn.onclick = () => {
            try {
              const filtered = produkData.filter(p => (p.kategori || "Umum") === k);
              applyPriceFilter(filtered);
            } catch (e) {
              showToast(`Gagal menampilkan produk kategori ${k}.`, "error");
              console.error("Render category failed", e);
            }
          };
          wrap.appendChild(btn);
        });
      } catch (e) {
        showToast("Gagal memuat kategori.", "error");
        console.error("renderCategories failed", e);
      }
    }
    // PRICE FILTER
    function applyPriceFilter(data) {
      try {
        const priceFilter = document.getElementById("price-filter").value;
        let filtered = data;
        if (priceFilter) {
          const [min, max] = priceFilter.split("-").map(Number);
          filtered = data.filter(p => {
            if (!p.harga || isNaN(p.harga)) {
              showToast(`Harga produk ${p.nama || "tidak diketahui"} tidak valid.`, "error");
              return false;
            }
            if (max) return p.harga >= min && p.harga <= max;
            return p.harga >= min;
          });
        }
        renderProduk(filtered);
      } catch (e) {
        showToast("Gagal menerapkan filter harga.", "error");
        console.error("Price filter failed", e);
      }
    }
    document.getElementById("price-filter").addEventListener("change", () => {
      try {
        applyPriceFilter(produkData);
      } catch (e) {
        showToast("Gagal menerapkan filter harga.", "error");
        console.error("Price filter failed", e);
      }
    });
    // RENDER PRODUCT GRID
    function renderProduk(list) {
      try {
        const grid = document.getElementById("produk-grid");
        if (!grid) {
          showToast("Gagal menampilkan produk.", "error");
          throw new Error("Produk-grid element not found");
        }
        grid.innerHTML = "";
        if (!list || !list.length) {
          grid.innerHTML = `<div class="flex-1 text-center text-gray-500 py-8">Produk tidak ditemukan</div>`;
          return;
        }
        for (const item of list) {
          if (!item || !item.id || !item.nama) {
            showToast("Data produk tidak valid.", "error");
            continue;
          }
          const card = document.createElement("article");
          card.className = "bg-white rounded-xl overflow-hidden shadow hover:shadow-lg transition cursor-pointer";
          const img = document.createElement("img");
          img.src = item.gambar || "https://via.placeholder.com/200x150?text=No+Image";
          img.alt = item.nama || "Produk";
          img.className = "h-40 w-full object-cover";
          img.onerror = () => { img.src = "https://via.placeholder.com/200x150?text=No+Image"; };
          const body = document.createElement("div");
          body.className = "p-3";
          const title = document.createElement("h3");
          title.className = "text-sm font-semibold";
          title.innerText = item.nama || "‚Äî";
          const merchant = document.createElement("p");
          merchant.className = "text-xs text-gray-500 mt-1";
          merchant.innerText = item.merchant || "";
          const row = document.createElement("div");
          row.className = "mt-3 flex items-center justify-between gap-2";
          const price = document.createElement("div");
          price.className = "text-sm font-bold text-rose-600";
          price.innerText = rupiah(item.harga);
          const btn = document.createElement("button");
          btn.className = "text-xs bg-rose-500 text-white px-3 py-1 rounded-md hover:bg-rose-500";
          btn.innerText = "Beli";
          btn.onclick = (e) => {
            try {
              e.stopPropagation();
              openModal(item);
            } catch (e) {
              showToast("Gagal membuka detail produk.", "error");
              console.error("Open modal failed", e);
            }
          };
          row.appendChild(price);
          row.appendChild(btn);
          body.appendChild(title);
          body.appendChild(merchant);
          body.appendChild(row);
          card.appendChild(img);
          card.appendChild(body);
          card.addEventListener("click", () => {
            try {
              openModal(item);
            } catch (e) {
              showToast("Gagal membuka detail produk.", "error");
              console.error("Open modal failed", e);
            }
          });
          grid.appendChild(card);
        }
      } catch (e) {
        showToast("Gagal menampilkan produk.", "error");
        console.error("renderProduk failed", e);
      }
    }
    // SEARCH
    function performSearch() {
      try {
        const v = document.getElementById("search").value.trim().toLowerCase();
        if (!v) {
          applyPriceFilter(produkData);
          return;
        }
        if (v.length < 2) {
          showToast("Masukkan kata kunci", "error");
          return;
        }
        const filtered = produkData.filter(p =>
          (p.nama || "").toLowerCase().includes(v) ||
          (p.deskripsi || "").toLowerCase().includes(v) ||
          (p.merchant || "").toLowerCase().includes(v) ||
          (p.kategori || "").toLowerCase().includes(v)
        );
        applyPriceFilter(filtered);
      } catch (e) {
        showToast("Gagal melakukan pencarian.", "error");
        console.error("Search failed", e);
      }
    }
    document.getElementById("search").addEventListener("input", performSearch);
    document.getElementById("search-button").addEventListener("click", performSearch);
    // MODAL CONTROLS
    function openModal(item) {
      try {
        if (!item || !item.id || !item.nama) {
          showToast("Data produk tidak valid.", "error");
          return;
        }
        selectedProduk = item;
        selectedQuantity = 1;
        const modal = document.getElementById("modal-produk");
        if (!modal) {
          showToast("Gagal membuka detail produk.", "error");
          throw new Error("Modal-produk element not found");
        }
        document.getElementById("modal-gambar").src = item.gambar || "https://via.placeholder.com/200x150?text=No+Image";
        document.getElementById("modal-gambar").onerror = () => { document.getElementById("modal-gambar").src = "https://via.placeholder.com/200x150?text=No+Image"; };
        document.getElementById("modal-nama").innerText = item.nama || "‚Äî";
        document.getElementById("modal-merchant").innerText = item.merchant || "‚Äî";
        document.getElementById("modal-deskripsi").innerText = item.deskripsi || "Tidak ada deskripsi.";
        document.getElementById("modal-harga").innerText = rupiah(item.harga);
        document.getElementById("modal-kategori").innerText = item.kategori || "Umum";
        document.getElementById("modal-quantity").innerText = selectedQuantity;
        modal.classList.remove("hidden");
        document.body.classList.add("modal-open");
      } catch (e) {
        showToast("Gagal membuka detail produk.", "error");
        console.error("openModal failed", e);
      }
    }
    function closeModal() {
      try {
        const modal = document.getElementById("modal-produk");
        if (!modal) {
          showToast("Gagal menutup detail produk.", "error");
          throw new Error("Modal-produk element not found");
        }
        modal.classList.add("hidden");
        document.body.classList.remove("modal-open");
      } catch (e) {
        showToast("Gagal menutup detail produk.", "error");
        console.error("closeModal failed", e);
      }
    }
    function openCheckout() {
      try {
        if (!selectedProduk) {
          showToast("Pilih produk terlebih dahulu.", "error");
          return;
        }
        if (selectedQuantity < 1) {
          showToast("Jumlah pesanan minimal 1.", "error");
          return;
        }
        const sum = document.getElementById("checkout-summary");
        if (!sum) {
          showToast("Gagal menampilkan ringkasan pesanan.", "error");
          throw new Error("Checkout-summary element not found");
        }
        sum.innerHTML = `
          <div class="font-semibold">${selectedProduk.nama || "‚Äî"}</div>
          <div class="text-xs text-gray-500">${selectedProduk.merchant || "‚Äî"} ‚Ä¢ ${selectedProduk.alamat || "‚Äî"}</div>
          <div class="mt-2">Jumlah: ${selectedQuantity}</div>
          <div class="mt-2 text-rose-600 font-bold">Total: ${rupiah(selectedProduk.harga * selectedQuantity)}</div>
        `;
        document.getElementById("input-nama").value = "";
        document.getElementById("input-alamat").value = "";
        document.getElementById("input-hp").value = "";
        closeModal();
        const modalCheckout = document.getElementById("modal-checkout");
        if (!modalCheckout) {
          showToast("Gagal membuka form checkout.", "error");
          throw new Error("Modal-checkout element not found");
        }
        modalCheckout.classList.remove("hidden");
        document.body.classList.add("modal-open");
      } catch (e) {
        showToast("Gagal membuka form checkout.", "error");
        console.error("openCheckout failed", e);
      }
    }
    function closeCheckout() {
      try {
        const modalCheckout = document.getElementById("modal-checkout");
        if (!modalCheckout) {
          showToast("Gagal menutup form checkout.", "error");
          throw new Error("Modal-checkout element not found");
        }
        modalCheckout.classList.add("hidden");
        document.body.classList.remove("modal-open");
      } catch (e) {
        showToast("Gagal menutup form checkout.", "error");
        console.error("closeCheckout failed", e);
      }
    }
    function normalizeHp(raw) {
      try {
        if (!raw) {
          showToast("Nomor HP wajib diisi.", "error");
          return "";
        }
        let s = String(raw).trim().replace(/\s+/g, "");
        s = s.replace(/^(\+62|62)/, "0");
        if (s.startsWith("0")) return "62" + s.slice(1);
        if (s.startsWith("62")) return s;
        return s;
      } catch (e) {
        showToast("Gagal memproses nomor HP.", "error");
        console.error("normalizeHp failed", e);
        return "";
      }
    }
    async function insertOrderToSupabase(orderData) {
      try {
        if (!orderData || !orderData.produk_id || !orderData.nama_pelanggan) {
          showToast("Data pesanan tidak lengkap.", "error");
          throw new Error("Invalid order data");
        }
        const { error } = await supabaseClient
          .from("orders")
          .insert([orderData]);
        if (error) {
          showToast("Gagal memproses pesanan", "error");
          throw new Error("Error inserting order: " + error.message);
        }
        return true;
      } catch (e) {
        showToast("Gagal menyimpan pesanan ke database.", "error");
        console.error("insertOrderToSupabase failed", e);
        return false;
      }
    }
    async function handleCheckout() {
      try {
        const nama = document.getElementById("input-nama")?.value.trim();
        const alamat = document.getElementById("input-alamat")?.value.trim();
        const hpRaw = document.getElementById("input-hp")?.value.trim();
        if (!nama || !alamat || !hpRaw) {
          showToast("Error, harap isi semua", "error");
          return;
        }
        if (nama.length < 2) {
          showToast("Nama harus minimal 2 karakter.", "error");
          return;
        }
        if (!/^[a-zA-Z\s]+$/.test(nama)) {
          showToast("Nama hanya boleh berisi huruf dan spasi.", "error");
          return;
        }
        if (alamat.length < 5) {
          showToast("Alamat harus minimal 5 karakter.", "error");
          return;
        }
        const hp = normalizeHp(hpRaw);
        if (!hp.match(/^(\+62|62|0)\d{9,12}$/)) {
          showToast("Nomor HP tidak valid. Gunakan format 0812xxxx.", "error");
          return;
        }
        if (!selectedProduk) {
          showToast("Produk tidak tersedia. Pilih produk terlebih dahulu.", "error");
          return;
        }
        if (!operatorData.length) {
          showToast("Tidak ada nomor operator. Hubungi admin.", "error");
          return;
        }
        const idx = getWaIndex() % operatorData.length;
        bumpWaIndex();
        const operator = operatorData[idx];
        if (!operator || !operator.nomor) {
          showToast("Nomor operator tidak valid. Hubungi admin.", "error");
          return;
        }
        const totalHarga = selectedProduk.harga * selectedQuantity;
        const orderData = {
          produk_id: selectedProduk.id,
          produk_nama: selectedProduk.nama,
          harga: selectedProduk.harga,
          jumlah: selectedQuantity,
          total: totalHarga,
          nama_pelanggan: nama,
          alamat,
          nomor_hp: hpRaw,
          operator_nomor: operator.nomor,
          created_at: new Date().toISOString()
        };
        const saved = await insertOrderToSupabase(orderData);
        if (!saved) return;
        const list = [
          `Halo kak, saya ingin pesan produk:`,
          `Nama: ${nama}`,
          `Alamat: ${alamat}`,
          `HP: ${hpRaw}`,
          `Merchant: ${selectedProduk.merchant || "-"}`,
          `Produk: ${selectedProduk.nama || "-"} (${selectedProduk.kategori || "-"})`,
          `Jumlah: ${selectedQuantity}`,
          `Harga Satuan: ${rupiah(selectedProduk.harga)}`,
          `Total Harga: ${rupiah(totalHarga)}`,
          `---`,
          `*note : Admin akan menghubungi anda via panggilan telepon untuk konfirmasi pesanan*`
        ];
        const text = encodeURIComponent(list.join("\n"));
        const waNumber = String(operator.nomor).replace(/\D/g, "");
        if (!waNumber) {
          showToast("Nomor operator tidak valid.", "error");
          return;
        }
        const url = `https://wa.me/${waNumber}?text=${text}`;
        window.open(url, "_blank");
        try {
          const history = JSON.parse(localStorage.getItem("orders") || "[]");
          history.unshift({
            produkId: selectedProduk.id,
            produkNama: selectedProduk.nama,
            harga: selectedProduk.harga,
            jumlah: selectedQuantity,
            total: totalHarga,
            nama,
            alamat,
            hp: hpRaw,
            operator: waNumber,
            ts: new Date().toISOString()
          });
          localStorage.setItem("orders", JSON.stringify(history.slice(0, 50)));
        } catch (e) {
          showToast("Gagal menyimpan riwayat pesanan lokal.", "error");
          console.error("Local storage save failed", e);
        }
        closeCheckout();
        showToast("Pesanan berhasil diproses! Mengarahkan ke WhatsApp admin", "success");
      } catch (e) {
        showToast("Gagal memproses checkout. Coba lagi.", "error");
        console.error("handleCheckout failed", e);
      }
    }
    // HERO AND CTA ACTION SCROLL
    function scrollToProductGrid() {
      try {
        const grid = document.getElementById("produk-grid");
        if (!grid) {
          showToast("Gagal menavigasi ke daftar produk.", "error");
          throw new Error("Produk-grid element not found");
        }
        grid.scrollIntoView({ behavior: "smooth", block: "start" });
      } catch (e) {
        showToast("Gagal menavigasi ke daftar produk.", "error");
        console.error("Scroll to product grid failed", e);
      }
    }
    document.getElementById("hero-action-1")?.addEventListener("click", scrollToProductGrid);
    document.getElementById("hero-action-2")?.addEventListener("click", scrollToProductGrid);
    document.getElementById("hero-action-3")?.addEventListener("click", scrollToProductGrid);
    document.getElementById("cta-button")?.addEventListener("click", scrollToProductGrid);
    // ACCESSIBILITY
    document.addEventListener("keydown", (e) => {
      try {
        if (e.key === "Escape") {
          closeModal();
          closeCheckout();
          sidebar.classList.add("translate-x-full");
          backdrop.classList.remove("open");
          document.body.classList.remove("sidebar-open");
        }
      } catch (e) {
        showToast("Gagal menutup modal atau menu.", "error");
        console.error("Escape key handler failed", e);
      }
    });
    // INPUT VALIDATION
    document.getElementById("input-nama").addEventListener("input", (e) => {
      const value = e.target.value.trim();
      if (value.length > 50) {
        e.target.value = value.slice(0, 50);
        showToast("Nama maksimal 50 karakter.", "error");
      }
      if (value && !/^[a-zA-Z\s]+$/.test(value)) {
        showToast("Nama hanya boleh berisi huruf dan spasi.", "error");
      }
    });
    document.getElementById("input-alamat").addEventListener("input", (e) => {
      const value = e.target.value.trim();
      if (value.length > 100) {
        e.target.value = value.slice(0, 100);
        showToast("Alamat maksimal 100 karakter.", "error");
      }
    });
    document.getElementById("input-hp").addEventListener("input", (e) => {
      const value = e.target.value.trim();
      if (value.length > 15) {
        e.target.value = value.slice(0, 15);
        showToast("Nomor HP maksimal 15 karakter.", "error");
      }
      if (value && !/^\+?\d*$/.test(value)) {
        showToast("Nomor HP hanya boleh berisi angka dan tanda +.", "error");
      }
    });
    // INIT
    try {
      loadData();
    } catch (e) {
      showToast("Gagal memulai aplikasi. Periksa koneksi Anda.", "error");
      console.error("Initialization failed", e);
    }
  </script>
</body>
</html>

